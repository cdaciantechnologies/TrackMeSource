<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Route View</title>
    <link href="css/css.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <link href="css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="css/buttons.dataTables.min.css" rel="stylesheet">
    <style type="text/css">
        div#map_container {
            width: 100%;
            height: 250px;
        }
    </style>

    <link href="css/css.css" rel="stylesheet" type="text/css" />
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD5S4p1X2ItBi2COzuPMC1NQbopFWmESAE"
        async defer></script>

    <script type="text/javascript">
        var xmlHttpRequest = new XMLHttpRequest();
            function loadMap() {

                /*	xmlHttpRequest.open("get", "/TrackMeWeb/TrackMeServlet?action=getVehicleLocations", true);
                    xmlHttpRequest.onreadystatechange = addDataToPage;
                    xmlHttpRequest.send(null);
                    
                    function addDataToPage()
                    {
                    if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200) 
                        {
                            var table = document.getElementById("entrydata");
                            var dom = (new DOMParser()).parseFromString(xmlHttpRequest.responseText, "text/xml");
                            var data = dom.getElementsByTagName("vehicle");
                            if( data.length > 0 )*/ {
                            var i = 0;
                            var markers = [];
                            //var latlng = new google.maps.LatLng({lat: parseFloat( data[0].childNodes[2].firstChild.nodeValue ), lng: parseFloat( data[0].childNodes[3].firstChild.nodeValue )});

                            var map = new google.maps.Map(document.getElementById('map_container'), {
                                zoom: 6,
                                center: { lat: 12.8134422149, lng: 77.8488725 },
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                            });
                            var flightPlanCoordinates = [
                                                         { lat: 12.8114422149, lng: 77.8488725 },
                                                         { lat: 12.9184422149, lng: 77.868725 },
                                                         { lat: 12.9934422149, lng: 77.8888725 }
                            ];

                            var flightPath = new google.maps.Polyline({
                                path: flightPlanCoordinates,
                                geodesic: true,
                                strokeColor: '#FF0000',
                                strokeOpacity: 1.0,
                                strokeWeight: 2
                            });

                            flightPath.setMap(map);


                            markers.push(new google.maps.Marker(
                                    {
                                        position: { lat: 37.772, lng: 78.23 },
                                        map: map,
                                        title: 1,
                                        icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
                                    }));
                            markers.push(new google.maps.Marker(
                                    {
                                        position: { lat: 37.291, lng: 78.28 },
                                        map: map,
                                        title: 2,
                                        icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
                                    }));
                            markers.push(new google.maps.Marker(
                                    {
                                        position: { lat: 36.7, lng: 78.33 },
                                        map: map,
                                        title: 3,
                                        icon: 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png'
                                    }));
                            markers.push(new google.maps.Marker(
                                    {
                                        position: { lat: 36.5, lng: 78.38 },
                                        map: map,
                                        title: 4,
                                        icon: 'http://maps.google.com/mapfiles/ms/icons/orange-dot.png'
                                    }));
                            /*		while(i < data.length )
                                        {
                                        var unitno = data[i].childNodes[0].firstChild.nodeValue;
                                        var location = data[i].childNodes[1].firstChild.nodeValue;
                                        var lati = data[i].childNodes[2].firstChild.nodeValue;
                                        var lon = data[i].childNodes[3].firstChild.nodeValue;
                                        var latlng = new google.maps.LatLng({lat: parseFloat(lati), lng: parseFloat(lon)}); 
                                        markers.push(new google.maps.Marker(
                                                {
                                                    position: latlng,
                                                    map: map,
                                                    title:location,
                                                    icon : 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
                                                })); 
                                        i++;
                                        } **/
                        }


            }


            </script>
</head>

<body class="top-navigation" onload="loadMap()">

    <div id="wrapper">

        <div class="navbar-fixed-top">
            <div class="row">
                <div class="col-xs-3 col-sm-3">
                    <a href="#" class="logo-img">
                        <img src="" alt="" /></a>
                </div>
                <div class="col-xs-6 col-sm-6 text-center">
                    <div class="top-title">VEHICLE TRACKING AND FLEET MANAGMENT SYSTEM</div>
                </div>
                <div class="col-xs-3 col-sm-3 text-right">
                    <div class="cust-logo">
                        <img src="images/cust-logo.jpg" alt="" />
                        <span>Customer Logo</span>
                    </div>
                </div>
            </div>
            <div class="row border-bottom white-bgx">
                <div class="col-xs-12">
                    <nav class="navbar navbar-static-top" role="navigation">
				  <div class="navbar-header">
					<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button"> <i class="fa fa-reorder"></i> </button> 
				  </div>
				  <div class="navbar-collapse collapse" id="navbar">
					<ul class="nav navbar-nav">
					  <li > <a aria-expanded="false" role="button" href="index.html">Live</a> </li>
					  <li class="dropdown"> <a aria-expanded="false" role="button" href="#" class="dropdown-toggle">Vehicle Information<span class="caret"></span></a>
						<ul  role="menu" class="dropdown-menu">
						  <li ><a href="vehicle-view.html"><i class="fa fa-eye"></i> Vehicle View</a></li>
						  <li ><a href="vehicle-map-view.html"><i class="fa fa-map-marker"></i> Vehicle Map View</a></li>
						  <li ><a href="vihicle-information.html"><i class="fa fa-info-circle"></i> Vehicle information </a></li>
						  <li><a href="#"><i class="fa fa-list"></i> Vehicle I/O List</a></li>
						</ul>
					  </li>
					  <li> <a aria-expanded="false" role="button" href="reports.html">Reports</a> </li>
					  <li class="dropdown active"> <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" >Settings<span class="caret"></span></a>
						<ul role="menu" class="dropdown-menu">
						  <li ><a href="driver-scheduling.html"> <i class="fa fa-wheelchair"></i> Driver Scheduling </a></li>
						  <li class="active"><a href="vehicle-service.html"> <i class="fa fa-car"></i> Vehicle Service </a></li>
						  <li><a href="#"> <i class="fa fa-th"></i> Geofency</a></li>
						  <li ><a href="fuel.html"> <i class="fa fa-bus"></i> Fuel </a></li>
						  <li><a href="location-entry.html"> <i class="fa fa-location-arrow"></i> Location Entry </a></li>
						  <li ><a href="route.html"> <i class="fa fa-random"></i> Route </a></li>
						  <li><a href="route-schedule.html"> <i class="fa fa-line-chart"></i> Route Scheduling </a></li>
						</ul>
					  </li>
					  <li class="dropdown"> <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" >Configuration<span class="caret"></span></a>
						<ul role="menu" class="dropdown-menu">
						  <li ><a href="vehicle-master.html"> <i class="fa fa-empire"></i> Vehicle Master</a></li>
						  <li><a href="driver-details.html"> <i class="fa fa-pencil-square"></i> Driver Details</a></li>
						  <li ><a href="vehicle-groups.html"> <i class="fa fa-taxi"></i> Vehicle Groups</a></li>
						  <li ><a href="alert_master_view.html"> <i class="fa fa-certificate"></i> Alert</a></li>
						  <li ><a href="user.html"> <i class="fa fa-user"></i> User</a></li>
						  <li><a href="no-movement.html"> <i class="fa fa-dot-circle-o"></i> No Movement </a></li>
						</ul>
					  </li>
					  <li class="dropdown"> <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" >School<span class="caret"></span></a>
						<ul role="menu" class="dropdown-menu">
						  <li><a href="student-entry.html"> <i class="fa fa-child"></i> Student Entry </a></li>
						</ul>
					  </li>
					</ul>
					<ul class="nav navbar-top-links navbar-right">
					  <li><span class="cust-name">Welcome to Test</span></li>
					  <li> <a href="../j_spring_security_logout"> <i class="fa fa-sign-out"></i> Log out </a> </li>
					</ul>
				  </div>
				</nav>
                </div>
            </div>
        </div>

        <div id="page-wrapper2" class="gray-bg">
            <div class="rowx wrapper border-bottom white-bg page-heading">
                <div class="col-sm-12">
                    <h2>Vehicle Dashboard</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="wrapper wrapper-content animated fadeInUp">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-content">
                                        <div id="map_container"></div>
                                        <div class="clearfix"></div>
                                        <br />
                                        <br />
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered new-tbl" id="entrydata">
                                                <thead>
                                                    <tr>
                                                        <th>Vehicle No/ Name</th>
                                                        <th>Unit No</th>
                                                        <th>Vehicle Type</th>
                                                        <th>Location</th>
                                                        <th>Latitude</th>
                                                        <th>Longitude</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="foot-fixed">
            <div class="auto-reloader-bar">
                <div class="row">
                    <div class="col-xs-6">
                    </div>
                    <div class="col-xs-6 text-right">
                        <div class="copy-txt"><strong>Copyright</strong> Neha Software Technologies &copy; 2016 </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jquery-1.12.4.js"></script>
    <script type="text/javascript" src="js/tether.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="js/dataTables.bootstrap.min.js"></script>

    <script type="text/javascript" src="js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="js/buttons.flash.min.js"></script>
    <script type="text/javascript" src="js/jspdf.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="js/icheck.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
          $('#entrydata').DataTable({
              dom: 'Bfrtip',
              buttons: [
                          'copyHtml5',
                          'excelHtml5',
                          'csvHtml5',
                          'pdfHtml5'
              ]
          });
          if ($("input[type='search']").length > 0) {
              $("input[type='search']").addClass("form-control");
          }
          if ($("select[name='entrydata_length']").length > 0) {
              $("select[name='entrydata_length']").addClass("form-control");
          }
          $('.i-checks').iCheck({
              checkboxClass: 'icheckbox_square-green',
              radioClass: 'iradio_square-green',
          });
      });
            </script>
</body>
</html>

